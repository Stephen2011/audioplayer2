<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Gospel Songs App</title>

<meta name="theme-color" content="#000000">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

header, footer {
    background: #000;
    padding: 14px;
    text-align: center;
}

main {
    flex: 1;
    padding: 15px;
    text-align: center;
}

button {
    width: 90%;
    max-width: 360px;
    padding: 14px;
    margin: 6px 0;
    font-size: 1.05em;
    border: none;
    border-radius: 10px;
    background: #28a745;
    color: #fff;
}

.blue { background: #007bff; }
.yellow { background: #ffc107; color: #000; }
.red { background: #dc3545; }

.playlist {
    margin-top: 15px;
    max-width: 380px;
    margin-inline: auto;
    background: #000;
    border-radius: 10px;
}

.song {
    padding: 10px;
    border-bottom: 1px solid #333;
}

.song.active {
    background: #28a745;
}

.timer {
    margin: 10px 0;
}
</style>
</head>

<body>

<header>üé∂ Gospel Songs Audio App</header>

<main>

<button onclick="playRandom()">‚ñ∂ Play</button>
<button class="blue" onclick="prevSong()">‚èÆ Previous</button>
<button class="blue" onclick="nextSong()">‚è≠ Next</button>
<button class="yellow" onclick="pauseSong()">‚è∏ Pause</button>
<button class="red" onclick="stopSong()">‚èπ Stop</button>

<button onclick="toggleShuffle()">üîÄ Shuffle: <span id="shuffleStatus">OFF</span></button>
<button onclick="toggleRepeat()">üîÅ Repeat: <span id="repeatStatus">OFF</span></button>

<div class="timer" id="timer">00:00 / 00:00</div>

<p>üîä Volume</p>
<input type="range" min="0" max="1" step="0.01" value="1"
       oninput="audio.volume=this.value">

<div class="playlist" id="playlist"></div>

</main>

<footer style="color: gold; font-size:1.2em; ">
Evangelist Stephen Jolayemi ¬© <span id="year"></span>&nbsp;&nbsp;There is no peace,' says my God, 'for the wicked.<br> All Rights Reserved.
</footer>

<script>
/* AUDIO ENGINE (ANDROID SAFE) */
const audio = new Audio();
audio.preload = "metadata";
audio.controls = false;

/* SONG LIST (MAKE SURE FILE EXISTS!) */
const songs = [
  
   {title:"Gospel Song 11", file:"song 11.mp3"},
  {title:"Gospel Song 12", file:"song 12.mp3"},
  {title:"Gospel Song 13", file:"song 13.mp3"},
  {title:"Gospel Song 14", file:"song 14.mp3"},
  {title:"Gospel Song 15", file:"song 15.mp3"},
  {title:"Gospel Song 16", file:"song 16.mp3"},
  {title:"Gospel Song 17", file:"song 17.mp3"}
];

let index = 0;
let shuffle = false;
let repeatMode = 0;

/* PLAYLIST UI */
const playlist = document.getElementById("playlist");
songs.forEach((song,i)=>{
  const div = document.createElement("div");
  div.className = "song";
  div.textContent = song.title;
  div.onclick = () => playSong(i);
  playlist.appendChild(div);
});

function highlight(){
  document.querySelectorAll(".song").forEach((el,i)=>{
    el.classList.toggle("active", i === index);
  });
}

/* CORE FIXED PLAY FUNCTION */
function playSong(i){
  index = i;
  audio.pause();
  audio.src = songs[index].file;
  audio.load(); // IMPORTANT FIX

  audio.play()
    .then(() => highlight())
    .catch(err => {
        alert("Audio failed to play. Check file name & location.");
        console.error(err);
    });
}

function playRandom(){
  index = Math.floor(Math.random() * songs.length);
  playSong(index);
}

function nextSong(){
  if(shuffle){
    playRandom();
    return;
  }
  index++;
  if(index >= songs.length){
    if(repeatMode === 2) index = 0;
    else return;
  }
  playSong(index);
}

function prevSong(){
  index = (index - 1 + songs.length) % songs.length;
  playSong(index);
}

function pauseSong(){ audio.pause(); }
function stopSong(){ audio.pause(); audio.currentTime = 0; }

function toggleShuffle(){
  shuffle = !shuffle;
  document.getElementById("shuffleStatus").textContent = shuffle ? "ON" : "OFF";
}

function toggleRepeat(){
  repeatMode = (repeatMode + 1) % 3;
  document.getElementById("repeatStatus").textContent =
    repeatMode === 0 ? "OFF" : repeatMode === 1 ? "ONE" : "ALL";
}

/* AUTO NEXT */
audio.addEventListener("ended", ()=>{
  if(repeatMode === 1) playSong(index);
  else nextSong();
});

/* TIMER */
audio.addEventListener("timeupdate", ()=>{
  const f = t => String(Math.floor(t/60)).padStart(2,"0") + ":" +
                 String(Math.floor(t%60)).padStart(2,"0");
  document.getElementById("timer").textContent =
    f(audio.currentTime) + " / " + f(audio.duration || 0);
});

/* YEAR */
document.getElementById("year").textContent = new Date().getFullYear();
</script>

</body>
</html>

<!--
ANDROID WEBVIEW REQUIRED SETTINGS
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setMediaPlaybackRequiresUserGesture(false);
webView.getSettings().setDomStorageEnabled(true);

üî• Result

‚úî Audio plays
‚úî Playlist works
‚úî Random / Shuffle / Repeat works
‚úî Play Store safe
‚úî Android WebView stable
----------------------------------------

 -->
